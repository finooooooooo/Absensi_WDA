{% extends "base.html" %}
{% block content %}
<div class="container pt-4">
    <div class="d-flex justify-content-between mb-4">
        <h5 class="fw-bold text-wine">Kelola Jadwal & Libur</h5>
        <a href="/dashboard" class="btn btn-sm btn-outline-dark">Kembali</a>
    </div>
    <div class="card card-glass p-4 mb-4">
        <form action="/add_schedule" method="POST">
            <select class="form-select mb-2" name="user_id" required>
                <option value="global" class="text-danger fw-bold">-- LIBUR GLOBAL --</option>
                {% for u in users %}{% if u.role!='OWNER' %}<option value="{{ u.id }}">{{ u.full_name }} ({{ u.branch }})</option>{% endif %}{% endfor %}
            </select>
            <input type="date" class="form-control mb-2" name="date" required>
            <select class="form-select mb-2" name="status"><option value="OFF">OFF</option><option value="SAKIT">SAKIT</option><option value="IZIN">IZIN</option></select>
            <input type="text" class="form-control mb-3" name="description" placeholder="Keterangan">
            <button class="btn btn-wine w-100">Simpan</button>
        </form>
    </div>
    <div class="card card-glass"><table class="table table-hover mb-0">{% for s in schedules %}<tr><td>{{ s.date }}</td><td>{{ s.user.full_name if s.user else 'GLOBAL' }}</td><td>{{ s.status }}</td><td><form action="/delete_schedule/{{ s.id }}" method="POST"><button class="btn btn-sm btn-outline-danger">X</button></form></td></tr>{% endfor %}</table></div>
</div>
{% endblock %}